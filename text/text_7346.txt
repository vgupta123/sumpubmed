BACKGROUND
the technological advancement in molecular biology facilitates investigations of biodiversity and functions on a temporal and geospatial scale. improved sampling and laboratory methods, together with fast and affordable sequencing technologies  <cit> , provide the framework to create a network of data points capable to answer basic ecological questions such as: 'who is out there?' and 'what are these organisms doing?' to shed light on the complex interplay, adaptation and survival mechanisms of organisms in times of global change, contextual data describing the surrounding environment of sampling locations are of crucial importance  <cit> . at the very least, the latitude and longitude , the depth/altitude  in relation to sea level, and the sampling date and time  must be provided to allow anchoring molecular sequence data to their environmental context. if every sequence entry in the insdc databases, comprising of ddbj, embl and genbank, would be thus georeferenced, researchers would have the post factum opportunity to contextualize these sequences with environmental data  <cit> . the power of contextual data enriched sequence data sets for the environmental and medical field has been recently documented  <cit> .

unfortunately, a survey in the embl sequence repository has shown that only a minor set of sequences are accompanied by a relevant amount of contextual data. for example, latitude, longitude , and time , elements of the key contextual data tuple , are only reported in  <dig> % and  <dig> % of all submissions . but even if these data are available, correctness is not guaranteed.

the paucity of sequence associated contextual data has been recognized by the primary database providers and biocuration efforts are currently underway for specific subsets. the national center for biotechnology information , for example, curates the reference sequence  database which aims to provide a comprehensive, non-redundant, well-annotated set of sequences, including genomic dna, transcripts and proteins http://www.ncbi.nlm.nih.gov/refseq/. the european molecular biology laboratory  provides the uniprot/swiss-prot knowledgebase which focuses on high quality protein sequence annotations http://www.ebi.ac.uk/uniprot/ 
 <cit> . however, the common aim of these efforts is to enhance the quality of the sequence or protein data and annotations rather than to provide more information on the data processing or the environment where the sample or organism has been taken.

to improve the quantity and quality of contextual data describing the environment of a sample is currently addressed by several projects which systematically collect georeferenced sequence data, environmental parameters, and further curated metadata  <cit> . silva  <cit>  or rdp ii  <cit>  are examples for specialized databases that offer users curated and quality checked ribosomal rna sequences that are often enriched with more reliable contextual and taxonomic information than originally annotated by the sequence submitters.

furthermore, there are projects which curate the contextual data associated to the primary sequence data to facilitate specific analysis purposes. for example the genomes online database  collects metadata for ongoing and completed genome sequencing projects  <cit> . the visualization and analysis of microbial population structures  project, with its integrated collection of tools for researchers, aims to visualize and analyze data for microbial population structures and distributions. all the contextual data in vamps comes from the microbis database management system of the international census of marine microbes . the megx.net portal http://www.megx.net <cit>  systematically integrates environmental parameters and sequence data of marine microbial genomes and metagenomes using georeferencing as an anchor.

in  <dig> the international genomic standards consortium  introduced checklists to promote standardized contextual data acquisition and storage. so far the minimum information about a genome  sequence  has been published  <cit>  and the minimum information about an environmental sequence  is in development http://gensc.org/gc_wiki/index.php/miens. for data exchange, the genomic contextual data markup language   <cit>  has been developed. a corollary of these ongoing efforts is the need to support field scientists in the consistent capture, storage and submission of both contextual and sequence data. handlebar, a lightweight laboratory information management system  for the management of barcoded samples, in part addresses this issue by supporting the acquisition and processing of contextual data compliant with gsc standards  <cit> . the barcode of life database  initiative, which aims to identify and classify all eukaryotic life on earth  <cit> , also includes an advanced data acquisition and submission system. unfortunately the system only supports phylogenetic markers which serve the eukaryotic domain e.g. the cytochrome c oxidase i , which is only present in eukarya and absent in the other domains of life, and so far exclude archaea and bacteria. furthermore, it does not support the printing of database identifiers as barcodes to label collected samples.

even though initiatives and tools exist to enhance the quantity and quality of contextual data subsequent to sequence submission, the amount of contextual data in the insdc databases remains an issue. in summary, the most likely reasons for the persisting scarcity of consistent contextual data are:  contextual data that are recorded in the field are often not stored electronically in structured databases. consequently contextual data get rapidly unlinked from the sequence data and finally 'forgotten' in the sequence submission process.  there is a lack of automatic quality checking mechanisms active before data submission. unfortunately, the flood of data entering the public databases prevents any manual curation process.  the sheer amount of potential contextual data with respect to the different fields of research ranging from textual data to images or even videos would rapidly exceed the capacities of the insdc databases. consequently, only a commonly agreed and standardized subset of data can be stored and made available.

here the user-centric, web-based tool metabar is presented. metabar offers all the required features for sample identification and barcode labeling allowing robust sample tracking and inventorying. metabar is focused on the acquisition of contextual data recorded during sampling in the field 'offline' using spreadsheets. all recorded contextual data can be subsequently uploaded and consistently stored in an underlying database. the web graphical user interface  provides advanced user management and access to data and barcodes. vitally, the tool captures gsc standards compliant data and it is integrated into a set of tools to facilitate further data usage such as integration, visualization and analysis available from the marine ecological genomics database and portal, megx.net. finally, metabar supports contextual data enriched sequence submission to the insdc databases. the tool is not restricted to any given research field or domain of life, but can universally be applied to capture the contextual data of any biological sample. it is designed to support the complete workflow from the sampling event up to the sequence submission to an insdc database.

implementation
programming languages, tools and frameworks
metabar is programmed in the object-oriented, platform-independent programming language, java  <dig>  http://www.java.com/en/. metabar is a multiuser web application using apache tomcat http://tomcat.apache.org/, the open source spring framework http://www.springsource.org/about, jasig cas http://www.jasig.org/cas, which is used as a central authentication service to implement the user management, and apache poi http://poi.apache.org/ to parse the microsoft® excel® spreadsheets used for data input. any java objects generated are stored in a postgresql database using the ibatis persistence framework http://ibatis.apache.org/. the input fields in the microsoft® excel® spreadsheet are validated using visual basic  macros. the web interface has been continuously tested during development using selenium ide http://seleniumhq.org/projects/ide/ and junit http://www.junit.org/. the source code of the metabar application is available under the gnu gpl <dig> http://www.megx.net/metabar/data/metabar- <dig> .tar.gz and as additional file  <dig> to this publication.

core software components
the metabar application consists of  the microsoft® excel® acquisition spreadsheet which is used to capture and auto-correct the contextual data,  the metabar server which generates and receives the acquisition spreadsheets, parses the data and stores them in  megdb, a postgresql database which is the central database of the megx.net portal  <cit> .

external software components
metabar is integrated into a set of external tools directly accessible from the web interface. the interpolation of environmental physical and chemical parameters of the oceans can be initiated via the woa <dig> data extractor of the megx.net portal. on the fly visualization of sampling sites on a world map can be performed using the genes mapserver http://www.megx.net/gms and in google earth® via the kml export function. the data can be exported prior to sequence submission as a structured comment block for submission to insdc by the sequin tool http://www.ncbi.nlm.nih.gov/sequin/index.html. metabar also includes a data export to gcdml  <cit>  for report creation and data exchange.

RESULTS
the core application can be best explained by describing the workflow across the different metabar components . first, users log on to the metabar web server . upon entry, users can allocate a certain range of sample identifiers before, during or after a sampling campaign. the identifier consists of a six digit  that is incremented with every new sample, a six digit  that is incremented with every new project and a two digit  that is fixed and identifies a certain institute. the combination of these three parts in one identifier assures the unique identification of each sample. the identifiers can be printed  as barcodes onto labels  that can be placed on sample containers and pasted into laboratory notebooks for consistency. users can download  the acquisition spreadsheet containing the allocated identifiers and the empty contextual data fields in the first worksheet. as the user fills these fields, vba validation macros check the inputs and users are prompted to use, for example, correct formats in the correct numerical range, where applicable. new worksheets can be added to the spreadsheet. thus, any additional data outside of the metabar model can be added to the same file. once the worksheets are filled  they can be uploaded  to the metabar web server. after the upload is finished, the file is parsed and the values in the first worksheet are stored in the respective relational fields of the central database. the additional worksheets in the file are not lost, but stored as binary data in the database. the latter three steps can be repeated whenever it is necessary to edit and update the data. users can log in to the system at any time to search and browse their data via the web gui .

additionally, the metabar core set of contextual data fields can be extended for each sample with further gsc compliant parameters. these additional fields are organized into different types of report and environmental packages, each containing further parameters. the parameters can be directly selected and updated via the web interface .

metabar can also be used as an inventory e.g. for freezer contents. the database may be queried using sample identifiers by scanning their barcodes with an appropriate device, by manually entering their corresponding numeric code, or by text search on a metadata field. the query then retrieves all corresponding contextual data stored in the system.

metabar is integrated into a set of external tools with direct access from the web interface. the interpolation of physical and chemical parameters such as temperature, nitrate, phosphate, salinity, silicate, dissolved oxygen, oxygen saturation, apparent oxygen utilization and chlorophyll of a marine sampling site can be initiated via the woa <dig> data extractor of the megx.net portal. on the fly visualization of sampling sites on a world map can be performed using the genes mapserver http://www.megx.net/gms. furthermore, four export functions  are currently supported:  an export to kml to visualize sampling sites including their contextual data in google earth®,  an export to gcdml  <cit>  for report creation and for data exchange,  an export to a gsc compliant migs/mims/miens spreadsheet, and  an export as a structured comment for sequence data submission to the insdc databases using the sequin tool http://www.ncbi.nlm.nih.gov/sequin/index.html.

role, ownership and permission concept
metabar's user management provides a "metabar admin", a "project admin" and a "metabar user" mode. these modes depend on the role that is assigned to a certain user account. the web gui possesses a cascading menu on the left which contains the "metabar admin features", the "project admin features", and the "metabar user features", respectively. furthermore, a sophisticated ownership and permission concept offers the users to share their data with other users in the same project giving them read or write permissions, or to prevent access for others. project admins have the possibility to transfer the ownership of a set of samples to another user, create projects, assign users to a project and to remove users from a project. for a given metabar installation there is only one metabar admin who can create users, assign or dismiss project admins and delete samples or whole projects.

a quick reference guide describing the general workflow of metabar from the acquisition to the submission of data is available on the website. examples for metadata enriched insdc database entries, created with metabar, are available through the accession numbers: .

discussion
metabar can be used whenever it is necessary to capture contextual data that describe the environmental origin of a sample. the system has been tested in several studies in close collaboration with biologists taking samples in the field. by integrating their feedback metabar should qualify as user-friendly, scientist-centric software tool.

case study
the above mentioned studies allow the typical metabar workflow to be generalized as follows. a scientist acting as the project administrator  plans a sampling campaign together with two members in his research team . the project example is created in metabar and the users pm <dig> and pm <dig> are added to example. it is anticipated that pm <dig> will collect five push core samples of sediment while pm <dig> will collect five water samples. thus, pm <dig> and pm <dig> create five barcodes each and download their acquisition spreadsheets. these barcodes are printed in multiple copies to label sample containers, appear in field notebooks and for contingency.

during sample collection, pm <dig> and pm <dig> log contextual data such as latitude, longitude, depth and sampling time next to the barcode labels pasted in their field notebooks. the sample containers are labeled with the corresponding barcodes and transported back to the laboratory. the link between sample and environment is thus established. at the end of the sampling campaign the contextual data gathered in the field are transferred to pm <dig> and pm2's acquisition spreadsheets. barcodes pasted on the sample, the field records and present in the spreadsheet ensure fidelity and the data are then uploaded to the metabar server over the internet. pm <dig> and pm <dig> may enter further contextual data specific to their sampling environments by selecting the relevant gsc-compliant metadata packages  through the web gui. the pa and both members of the project can now review the consolidated contextual data for errors or missing values. corrective action at this stage improves the quality of the data prior to submission.

during laboratory processing, every new subsample is labeled with a copy of the original sample's barcode, preserving the link to the in situ sampling event. native laboratory protocols and practices are otherwise unaffected and are documented in laboratory books. pm <dig> sequences the genomes of several sediment sample isolates and pm <dig> sequences microbial metagenomes from the community in the water sample. congruent to the environmental extensions, gsc packages corresponding to various study types are available. pm <dig> and pm <dig> may use the "miens culture " and "metagenome " packages, respectively, to record data specific to their study type . pm <dig> and pm <dig> receive their genome and metagenome sequences as fasta files with automatically generated sequence identifiers in the header. the researchers enter these identifiers into the "seqid" field in the acquisition spreadsheet and export the data to a format for submission to insdc. with this mapping, these contextual datasets can easily be combined with one or more fasta sequences using a suitable submission tool. the researchers then submit their metadata-enriched sequences from the example project to an insdc database.

metabar implements a neat trade-off between universality and specificity. the export functions assure that the collected data can be publicly stored and shared with the scientific community.

comparison of metabar and handlebar
the idea of uniquely identifying samples and storing data about these samples in databases is not new and is widely used in many applications and disciplines. however, tools able to capture the contextual data of environmental samples combined with barcode labeling are rare. to our knowledge with the exception of metabar, the only open source tool using barcoding to identify georeferenced samples from the environment is handlebar  <cit> . a tabular comparison of the programs' general features can be found in table  <dig> 

operating system: windows® internet connection, web browser , microsoft® excel®  <dig> or higher
optional: epl barcode printer 

with local metabar server installation:
operating system: windows® or gnu linux
handlebar, as a lightweight lims, not only covers contextual data that are recorded during sampling, but also aims to document subsequent sample processing steps in the laboratory. in this respect, metabar is a simplification focusing only on the capture of contextual data in the field. metabar does not seek to replace well established laboratory bookkeeping or professional lim systems, but rather aims to complement this process to ensure that contextual data are electronically accessible. nevertheless, users may choose to use the tool as a storage inventory manager or to store intermediate results of sample processing because it is possible to store additional data in the spreadsheets. it is important to note that coupling contextual data with sequence data before submission to the insdc databases is a unique feature of metabar.

the barcodes are, by concept, solely used to link environmental samples to contextual and, if available, sequence and species data derived from a labeled sample, thus, no hierarchy or processing method is encoded in the identifiers. also, sample hierarchies and complex identifier schemes are avoided. this concept does not interfere with native laboratory sample tracking methods, yet ensures consistency in environmental contextual data capture.

it is important that users have the flexibility to cover different sample types. metabar offers a single template in which a restricted part is parsed to the database and an unrestricted part of the spreadsheet can be changed to contain sample specific additional data. handlebar offers a set of non-constrained sample templates depending on the sample type and also individual templates can be created. in metabar each sample can be extended with further parameters organized into types of report and environmental packages suggested by the gsc.

in contrast to handlebar, data entered into metabar's acquisition spreadsheet is validated on input, ensuring correct format before upload to the metabar server. this avoids frequent rejection of the acquisition sheet. in handlebar the validation is done by the web server and erroneous sheets have to be corrected retrospectively by the uploading user. the variety of export features are currently unique to metabar.

metabar is integrated into the megx.net tool set and connected to megdb. this offers opportunity to work with the data and to analyze them alone, or in the context of other research project data stored in the megx.net database. this level of integration necessitated a user authentication and authorization management system and ssl encryption. consequently, the local installation of metabar requires modification of the open source code base. the software and a detailed installation manual are available at http://www.megx.net/metabar. however, accounts on the metabar installation hosted at the mpi for marine microbiology in bremen can easily be given to interested users and an "anonymous" project exists where data of external users can be stored anonymously. it is the intention of the microbial genomics and bioinformatics group at the mpi-bremen to support this tool as open source in the future.

applicability
metabar has been developed at the max planck institute for marine microbiology; however, the tool may be readily applied to a wide range of research fields outside the marine sciences. contextual data fields relevant to air, host associated, human associated, sediment, soil, wastewater sludge or water samples are available via the "add gsc fields" function. the parameters in each of these environmental packages have been selected based on community usage and consensus http://gensc.org/gc_wiki/index.php/miens. for example, fields requesting data on barometric pressure, carbon dioxide, carbon monoxide, chemical administration, humidity, methane, organism count, oxygen, oxygenation status of sample, perturbation, pollutants, respirable particulate matter, sample salinity, sample storage duration, sample storage location, sample storage temperature, solar irradiance, temperature, ventilation rate, ventilation type, volatile organic compounds, wind direction, and wind speed would be presented to users using the air environmental package. users may easily add new, custom fields as columns using standard microsoft® excel® operations. combined, the gsc extensions and freedom for customization generalize metabar's applicability to any scenario necessitating the capture of contextual data describing a sample's environmental origin.

CONCLUSIONS
metabar offers an integrated contextual data acquisition, storage, and submission solution to the insdc system. the impact of better contextual data availability and correctness in the primary sequence databases will greatly improve the possibilities to reach a higher level of data integration and interpretation to address basic ecological questions. metabar's integration into the megx.net tool set and its export mechanisms offer extended analysis possibilities via comparison to other scientific studies and with complementary interpolated environmental data. the visualization of the sampling sites on the genes mapserver and in google earth® offers the users a simple way to show sampling events on the globe and to relate them to other publicly available scientific studies.

statistical analysis of phylogenetic and functional biodiversity in their environmental context will reveal new insights into the biogeography and habitat adaptation of organisms. in the medical field, for example, it will be possible to create detailed disease maps which reveal mutation patterns of a certain pathogenic organism over time  <cit> . such maps might help to predict the dispersal of epidemics and pandemics around the globe. for marine microbiology, ed delong and coworkers have successfully shown that there is a stratification of genomic variability along the depth continuum in the water column at a specific sampling location  <cit> . it has also been demonstrated that specific diversity patterns are annually recurring  <cit> . a dense network of data points, enriched with contextual data, will lead to new insights into the complex interplay of organisms by comparing different sampling sites around the globe and over time. the denser this network of data points, the more will be revealed about the influence of the biotic factor in the elementary nutrient cycles that profoundly affect earth's climate.

availability and requirements
project name: metabar

software

project homepage: http://www.megx.net/metabar

operating systems: linux and windows

programming language: java jre  <dig>  or higher

other requirements: microsoft® excel®  <dig> or higher, google earth® 

license: gnu general public license version  <dig> 

hardware

at least  <dig> mb of ram

epl barcode printer  

barcode handscanner 

the software can be tested anonymously using the login: "anonymous" with the password: "testmetabar".

authors' contributions
wh developed and implemented metabar and wrote the manuscript. rk advised programming design and helped with the integration of metabar with megdb and megx.net. df tested the software on cruises and provided feedback for design improvements. py assured the migs/mims/miens standard compliance in metabar. plb critically revised the manuscript and took care of envo integration. py, plb and rk tested the tool in the field. fog supervised the work and helped with writing the manuscript. all authors read and approved the final manuscript.

supplementary material
additional file 1
metabar open source code base under gnu gpl <dig> license. zipped open source code base for local installation. a general installation manual can be found in the readme.txt.

click here for file

 acknowledgements
thanks to jens harder, christine klockow, mirja meiners and all the testers. thanks to dawn field and tim booth at nerc, uk for feedback and useful input during the design phase of metabar. thanks to norma wendel for her help in finalizing the metabar source code. the study was supported by the max planck society.
