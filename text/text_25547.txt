BACKGROUND
accurate and consistent annotation of genomes presents a challenge that can be partially solved by automated and semi-automated annotation methods. improvements in the structural annotation of gene models can be obtained through training of ab initio gene finders and, for eukaryotes, through empirical transcript support in the form of expressed sequence tags  and, more critically, full-length cdnas  <cit> . in addition to structural annotation, in large-scale genome annotation projects functional annotation is performed in an automated manner and on an individual gene basis , and would greatly benefit from manual inspection. indeed, comparative analysis of related genes can provide important clues for the structural annotation of related proteins and assist in generating a homogeneous naming scheme at the family level.

the institute for genomic research  rice genome annotation database  contains the structural and functional annotation of the oryza sativa l. ssp. japonica cv. nipponbare genome  <cit> . it is the product of a mature pipeline that integrates ests and full-length cdnas with the fgenesh ab initio gene predictions, using the program to assemble spliced alignments  for structural annotation. functional annotation is achieved through blast and domain searches . despite the availability of over  <dig>  million ests and  <dig>  full-length cdnas  <cit> ,  <dig>  of the total  <dig>  non-transposable element-related gene models predicted in the rice genome have no or partial experimental support for their structure. given the lack of experimental evidence, it is likely that some of these models are mis-annotated at the structural level. additionally, some genes are probably undetected by our pipeline, as suggested by massively parallel signature sequence  data  <cit> .

since the sequencing of the human genome, 'open annotation' or reaching out to biologists with expertise in an organism of interest or in particular gene families has been recognized as a powerful way to improve the automated annotation of sequenced genomes through manual review  <cit> . in addition, participation by the community helps maintain up-to-date sets of models after the end of an initial annotation project. several approaches have been used to solicit community involvement including 1) 'jamborees' where annotation is performed by a select group of experts gathered in the same location for a short period of time as for drosophila  <cit>  and mouse  <cit> , 2) organized, dispersed efforts that are limited in time as done with honeybee  <cit> , or 3) on-going dispersed submissions from the community .

participants in the rice annotation project  manually annotated  <dig>  protein-coding genes supported by full-length cdna from rice or other monocots  <cit>  using the second approach. however, open-reading frames  were assigned functions on a gene-by-gene basis, similar to our automated pipeline. in addition, only genes with est or cdna evidence were annotated. in arabidopsis, several hundred genes predicted exclusively by ab initio prediction programs or through comparative alignment with brassica have been experimentally validated  <cit> , suggesting that many low-expression genes or genes with very circumscribed expression patterns may be missed by the rap effort.

to improve the quality of the rice genome annotation, we have developed eucap , a portable and flexible system for 1) the submission of structural and functional annotation of genes by dispersed community annotators , 2) the evaluation of ca contributions by project annotators , and 3) the incorporation of ca contributions into our ongoing annotation effort.

most approaches for the management of community input have aimed at "bringing annotation into the mainstream" and consists of developing tools for members of the community to annotate models de novo through a web interface . although this gene-by-gene approach has its benefits, it is ill-suited for the direct integration of previous knowledge by the ca and it requires that the ca be comfortable weighing the experimental evidence presented to him/her. like pseudocap, which was designed for the annotation of p. aeruginosa  <cit> , eucap has the advantage of also accepting cdna sequences as input. this feature allows the cas to directly submit models annotated previously by their method of choice. in addition, the ability to input sequence makes the eucap pipeline coordinate-independent, and allows researchers using rice pseudomolecules  built at different time or by different groups to submit their annotations without the difficulty of converting coordinates. eucap aims to make the submission of pre-determined gene structures as simple as possible while also allowing, if desired, the visualization and modification of these models in the context of available evidence.

the eucap pipeline relies on two mysql databases. the eucap gene model database is populated with structural and functional annotations provided through the eucap web tool or via email to a pa. the osa <dig> gff database contains the generic feature format -formatted models of the osa <dig> genome annotation . customized perl scripts facilitate the population of these databases and the generation of web pages displaying the ca model and any overlapping models from the latest release of the osa <dig> genome annotation. upon acceptance by the pa, the ca model is integrated into the osa <dig> genome annotation  <cit> . as of july  <dig>  over  <dig>  models have been contributed and approved for incorporation in the osa <dig> gene set.

implementation
eucap gene model database
the eucap gene model database is a mysql database that stores the functional and structural annotation submitted by the cas. the schema consists of six tables: users , family , superfamily , loci , structural_annotation , and sessions . a file with the sql commands needed to set up the database tables is included in the package available on sourceforge or in additional file .

osa <dig> gff database
the osa <dig> gff database uses the bioperl bio::db::gff schema and is loaded with gff-formatted annotation from the current version of the osa <dig> genome annotation database  <cit> . it is used by the eucap web tool and the web page generation scripts described below. it is also the backend for the osa <dig> genome browser.

eucap web tool
the web tool, available for testing at  <cit> , is composed of a server side perl cgi script, the eucap gene model database, and client side javascript. the web pages are stored as templates and can therefore be customized and integrated into the style of an existing website. they are dynamically completed using html::template. the class::dbi module is used to provide an object relational mapper  layer for database access. session management is provided by the cgi::session module. user authentication is provided by the authen::passphrase modules. several bioperl modules are used to access the osa <dig> gff and eucap gene model databases, generate images, perform blast searches, and parse blast output.

handling of email submissions
input for the eucap pipeline consists of a cdna sequence for each ca model and of an excel spreadsheet containing functional information for the ca model. the first step of the pipeline is to determine the osa <dig> locus identifiers  with which the ca models overlap. this is done by searching the cdnas against the rice pseudomolecules using gmap . a perl script parses the gmap compressed output and searches the mapped coordinates against the osa <dig> genome annotation database to identify the osa <dig> models overlapping with the ca models. the spreadsheet, complete with the osa <dig> locus identifiers or mapping coordinates if no osa <dig> model is defined at that locus, are loaded into the loci table of the eucap gene model database. the cdnas of the ca models are aligned to the rice pseudomolecule twice using gmap with different set of options. output of the -s -n  <dig> -t options contains alignments truncated to the largest open reading frame and, by comparison to the full alignment output , allows the calculation of the untranslated regions . the two alignments are parsed and a gff output of the models' structures is created. the gff file is loaded into the structural_annotation table of the eucap gene model database. the superfamily, family, and users table of the eucap gene model database are populated based on information provided by the ca in the spreadsheet.

display of the community annotation
once the functional and structural annotation for a gene family is loaded into the eucap gene model database, perl scripts generate the web pages using a html template and the bioperl bio::graphics interface to create the images of the osa <dig> and ca models.

incorporation of the ca models to a new release of the osa <dig> genome annotation
ca models are first evaluated against the most recent release of the osa <dig> genome annotation. when a new release is launched, the models predicted by our automated pipeline are substituted with the adopted ca models. in the fall of  <dig>  our automated annotation pipeline was run in preparation for release  <dig> of our annotation. perl scripts were used to compare the ca models to the new gene predictions based on their gff-formatted coordinate information. in cases where the osa <dig> model differed from an accepted ca model, the coordinates of the osa <dig> model were adjusted in the osa <dig> genome annotation database to the ca model using neomorphic's annotation station  <cit> . models missed by the automated pipeline were also incorporated in the final release through annotation station. the ca functional annotations  were used to overwrite the automated annotation in the osa <dig> genome annotation database. afterward, a copy of the eucap gene model database was made. the locus identifiers and the functional annotation of the locus linked to the ca models were changed in the new database when different from the previous release. this new database was used to make ca web pages reflecting the changes in the osa <dig> genome annotation.

RESULTS
the submission and curation process
annotations can currently be submitted to the project in two ways to provide maximal ease and participation of cas. the eucap web tool was constructed for the ca to contribute structural and functional annotation of genes and gene models via a web-based portal  <cit> . in the first page of the eucap web tool, the user is prompted to enter a model or locus identifier, or alternatively, perform a blast search against the rice pseudomolecules using a protein or nucleotide sequence to identify the gene or locus to be annotated. once the corresponding osa <dig> model or the locus is found, the ca provides the name and description for the gene. additional functional annotation such as source , criteria used to determine the function, ca comments, putative subcellular localization, primer sequences, accession numbers of supporting evidence, or mutant lines can also be entered.

structural annotation can also be performed by the ca . the submitted model can be visualized alongside the osa <dig> model, rice transcript assemblies  as well as full-length cdnas aligning in the same region. in this interactive page, coordinates of the exon features of the depicted evidence and models are available through hyperlinks. new exons, updated coordinates and utrs can be added to the ca model, and viewed in the light of the available evidence. links to the osa <dig> rice genome browser  <cit> , the manatee page in which structural and functional evidence such as protein domains and blastp search results are collated  <cit> , the iowa state web aat server  <cit> , and the genomic sequence are provided to assist the cas in refining their annotation. upon submission, the coordinates of the contributed model are stored in the eucap gene model database.

while on-line submission is well-suited for a small number of genes, or in cases where the ca would like to edit online his/her models based on the current osa <dig> model or experimental evidence, it is tedious for large families and redundant when the gene model structure has already been established by the ca. therefore, we have developed an e-mail-based submission process thereby providing cas the option of emailing the models' cdna sequences  along with a preformatted excel spreadsheet containing the gene names and descriptions, a brief description of the annotation methods used, and supporting cdna or protein accessions. these data are then readily used to populate the loci and family tables of the eucap gene model database using a simple script.

automated display of alignment of the ca model
alignment of the ca-provided cdna sequences onto the rice pseudomolecules and prediction of the orfs in the cdna are performed using gmap  <cit> . the alignments are converted to gff and loaded into the structural_annotation table of the the eucap gene model database. graphical views of the ca models and osa <dig> models  are generated through a perl script that retrieves the coordinate information of the ca and of the osa <dig> model with which it overlaps, from the eucap gene model and the osa <dig> gff databases, respectively. a web page featuring these graphical representations and all the information relevant to the ca models and the family  is then automatically generated . hyperlinks of each locus to the osa <dig> genome browser allow the visualization of the experimental evidence aligning at that genomic location.

review by project annotators
prior to the public release of the community annotation, the ca-generated structural and functional annotation are reviewed by a pa. this review has three goals: 1) to ascertain that the intellectual contribution of the annotator is represented as intended in the ca webpage, 2) to communicate differences between the ca and the osa <dig> models to the ca, and 3) to decide whether the ca model should be adopted and integrated into the osa <dig> genome annotation or whether it should be rejected.

if differences exist between the structure of the ca model and that of the osa <dig> model, all supporting evidence is evaluated and weighed to determine the best structural annotation of the locus, and whether the osa <dig> model should be modified according to the ca. accepted guidelines for manual curation are followed for this evaluation, namely a full-length cdna is more trustworthy than an est which itself is more trustworthy than a protein alignment followed by a gene prediction  <cit> . when no evidence is available, or when the evidence is contradictory, the ca model is favored. the final decision regarding the structure of the osa <dig> model resides with the pa and is shared with the ca. however, the ca is free to represent his/her model within the ca gene family web page regardless of whether the model will be incorporated into the osa <dig> genome annotation. the gene name and description given by the ca is adopted for the osa <dig> model unless gross structural differences exist between the two models.

integration of the ca annotation into the osa <dig> genome annotation
as of july  <dig>   <dig>  genes contributed by  <dig> cas were evaluated against the release  <dig> models predicted by our pipeline for incorporation into the osa <dig> genome annotation. a total of  <dig>  ca models were adopted. the structural and/or functional annotation of the  <dig> genes reviewed and adopted before january  <dig> was incorporated into release  <dig>  while that of the  <dig> genes reviewed later will be integrated in the next release. altogether, we found that  <dig> or 79% of the genes contributed were structurally identical to the osa <dig> models  , indicating the high quality of our automated pipeline. a total of  <dig>  ca genes, with no corresponding locus identifiers, were "missed" by our annotation pipeline and were added to our set of models . in addition,  <dig>  models had their internal structure modified , and  <dig> alternative splice forms were added  according to the ca models. twenty  contributed models that either contradicted available evidence, or were most likely the product of truncated cdnas, or contained non-consensus splice sites, were not adopted.

a total of  <dig>  of the models were annotated as pseudogenes by the cas. these genes are thought to be non-functional due to the presence of premature stop codon interrupting the reading frame, and are currently not annotated as such by our automated annotation pipeline. seventeen of the  <dig> ca pseudogenes were annotated as genes by our pipeline, while  <dig> overlapped with annotated genes but had different boundaries or internal structure. thirty were not annotated. pseudogenes are difficult to identify in an automated manner. they are best recognized by comparison to functional members of the family which allows the detection of frameshifts and premature truncation. the ca platform is therefore ideal for their identification.

the most important contribution of the community effort has been toward functional annotation. through annotation of entire families, cas provide a nomenclature that is uniform at the family level and which is current with the published literature. we updated the functional annotation of  <dig>  loci from the osa <dig> genome annotation from the annotation assigned through our automated pipeline with the functional annotation provided by the ca.

to reflect the convergence of the community and the osa <dig> models, the ca web pages and the osa <dig> genome browser ca track were updated in january  <dig> with the final release  <dig> locus identifiers, model structures, and functional annotations. these overall changes were possible by the storage of the ca annotation in a dedicated database. we anticipate conducting a similar integration effort with models contributed in  <dig> in the next release of the osa <dig> genome annotation.

use of community annotation for the improvement of the automated pipeline
in order to identify areas for improvement for our automated pipeline, we examined cases of "missed" or wrong predictions by our pipeline in comparison to models provided by the cas. occurrences of missed genes resulted almost exclusively from the absence of fgenesh models, while misannotated genes resulted from inaccurate fgenesh prediction with no or partial est support. at these loci, ca models were supported primarily by protein alignments from arabidopsis or by aligning assemblies from maize or sorghum . this reflects the fact that most ca models were identified by homology to fully-characterized proteins in rice or other plants, or by phylogenetic analysis  <cit> . the incorporation of protein evidence into the automated prediction of orf could improve the final model in such cases. to that end, we are currently evaluating the performance of evidence modeler  <cit> , an algorithm incorporating ab initio gene predictions, cdna and protein evidence into the gene model.

CONCLUSIONS
we have designed eucap, a package for the incorporation of structural and functional annotation from the community into an on-going annotation effort. sets of simple perl scripts allow the pas to quickly enter the information in a database, integrate the ca annotation in the current project annotation and generate web pages. these pages represent the community models, credit the cas, and provide a centralized repository for their annotation.

eucap was designed to be portable and is freely available to other community annotation projects , although some modifications for local configurations may be necessary. the web pages are dynamically generated using templates and can therefore be integrated into an existing web site.

during the course of designing and validating the pipeline, we have learned that shifting the burden of the data processing from the cas to a few trained pas with a set of custom scripts at their disposal greatly enhances the efficiency of the submission process and stimulates greater ca participation. cas do not have to abide by strict data format constraints but are able to simply provide sequence files. for this reason, most cas have chosen to email their data rather than submit it with the eucap web tool.

in our experience, soliciting contributions is essential to a dynamic community annotation project. direct requests to the authors of relevant publications, presentation of the project at meetings and announcements on our website generated the majority of the contributions. in just one year, we have successfully obtained over  <dig>  manually curated genes  from members of the rice and plant community at large, incorporated this annotation into our annual update, and displayed all of the ca annotation on individualized web pages. by comparison, the arabidopsis information resource lists  <dig>  genes in  <dig> families annotated by the community  <cit> . however, it should be taken into consideration that the arabidopsis genome was completed in  <dig>  <cit> , five years before the rice genome  <cit>  and that the arabidopsis community is larger than the rice community. to avoid the waning of interest and participation observed by other community annotation projects after their initial efforts, we are committed to maintaining a proactive strategy to solicit scientists that have made their data public to participate in the community annotation process. we expect that the full sequence of additional plant genomes, in particular maize and sorghum  <cit> , will stimulate the use of phylogenomics approaches for the annotation of gene families in the grasses and thereby provide more high-quality annotations to incorporate into our community annotation project.

availability and requirements
• project name: eucap

• project home page: 

• operating system: platform independent

• programming language: perl, javascript

• other requirements: perl, apache, mysql, bioperl  <dig> . <dig> or higher, perl modules: authen::passphrase::md5crypt, cgi::session, html::template, class::dbi, dbi, dbd::mysql, io::string, json

• license: bsd

• any restrictions to use by non-academics: none

competing interests
the author declares that there are no competing interests.

authors' contributions
mac and ft reviewed the annotations, integrated them into the osa <dig> genome annotation and helped draft the manuscript. mac solicited the contributions. jph designed the database wrote the pipeline and helped draft the manuscript. wz participated in the initial design and coding portions of the prototype. crb helped draft the manuscript. all authors read and approved the final manuscript.

supplementary material
additional file 1
compressed folder of files necessary to install and use eucap.

click here for file

 acknowledgements
we are grateful to the participants in the rice community annotation project for contributing their annotations and we thank haining lin and drs. kevin childs and shu ouyang for helping in the review of contributed models.

work on the rice genome annotation is supported by a grant from the national science foundation plant genome research program to crb .
